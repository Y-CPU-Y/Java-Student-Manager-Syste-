# 第五章 关系数据库设计理论

关系模式是指关系的[描述](https://baike.baidu.com/item/描述/8928757)。

关系的描述称为关系模式（Relation Schema）它可以形式化地表示为：R（U，D，dom，F）

![image-20201125112101885](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125112109.png)

![image-20201125114142454](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125114142.png)

![image-20201125152253534](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125152300.png)

关系模式STJ（S，T，J）中，S表示学生，T表示老师，J表示课程。

函数依赖关系如下：
（S,J)→T;(S,T)→J;T→J;

（S,J),(S,T)是码；而T可以->J，所以T是决定因素，但是单是T推不出S，说明T不是码.

![image-20201125163751363](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125163751.png)

![image-20201125163932437](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20201125163932437.png)



AB闭包包含了所有的属性，所以AB是超码，同时AB也是候选码之一。

![image-20201125164203790](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20201125164203790.png)

![image-20201125221047350](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125221055.png)

因为HS的闭包包含所有属性，所以HS是唯一候选码，HR不是码

![image-20201125221633271](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125221633.png)



-----

#### 名词解惑

**候选码**：若关系中的某一属性组的值能唯一的标识一个元组，则称该属性组为候选码

| 姓名 | 性别 | 年龄 |
| ---- | ---- | ---- |
| 张明 | 男   | 18   |
| 李华 | 女   | 19   |

在上边的表格中，姓名、性别和年龄均可做为候选码，我们需要从中选出一个作为主码，主码也叫<u>主键</u>。

 **码（候选码）**中的属性称为**主属性**，而不在任何码中的出现的属性称为**非主属性**

**外码**：如果FK是关系R的属性集，并且不是R的码，但是FK与关系R1的主码K1对应（是指属性集FK就是关系R1的码K1），则称FK是关系R的外码。其中，R是参照关系，R1是被参照关系

**主属性：**包含任意一个候选码的属性<u>集合</u>称为主属性。

比如，竞赛表（竞赛编号，竞赛名称，竞赛组织者）

很明显可以看出竞赛编号能够唯一标识整张竞赛表，因此**候选码**是竞赛编号，并且仅此一个候选码，其他属性都不能唯一标识整张表，所竞赛编号同时也是**主码**。

这时候判断一下这几个属性or属性组是否是主属性，（竞赛编号）（竞赛编号，竞赛名称）（竞赛名称，竞赛组织者），（竞赛编号）只有一个属性，这个属性是主码，主码必定为候选码，**因此属性含有一个候选码，这个属性是主属性。**（竞赛编号，竞赛名称）有两个属性，其中竞赛编号是候选码，而竞赛名称不是候选码，那他是啥呢~前面有提到了，因为它跟候选码在同一个属性组里，所以，竞赛名称是**超码**，回过头来，最后得出**该属性组含有了一个候选码，因此该属性组中的各个属性都是主属性。**（竞赛名称，竞赛组织者）有两个属性，可以看出这两个属性都不是候选码，因此这个**属性组不包含候选码，属性组中中得各个元素称为非主属性。**

![image-20201125113948650](https://cdn.jsdelivr.net/gh/Y-CPU-Y/PicBed/img/20201125113948.png)

问：候选码选取规则：